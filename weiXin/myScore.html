<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name = "format-detection" content = "telephone=no">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>我的PU</title>
    <link href="bower_components/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/reset.css" rel="stylesheet">
</head>
<body>
<!--头部说明-->
<div class="w-head">
	<img src="img/back.png" class="w-back" onclick="history.back(-1)">
	<span>我的积分</span>
	<a href="#" class="w-share"><img src="img/shuo.png"></a>
	<a href="#" class="w-home"><img src="img/home.png"></a>
</div>
<div>
    <header class="score-header">
        <p>55.0</p>
        <p>当前积分</p>
    </header>
    <div class="score-list">
    	<p>明细</p>
        <ul>
            <li class="to-event" data-eventid="">
            	<div>
            		<div class="score-pic pull-left">
                       <img class="img-responsive" src="img/testimg.jpg">
                    </div>
                    <div class="score-school pull-left">
                        <p>大学生艺术节比赛活动大学生艺术节比赛活动大学生艺术节比赛活动</p>
                        <p>2015-09-28</p>
                    </div>
                    <div class="score-event-point pull-right">
                        <p class="score-event-signed">5.0<span>分</span></p>
                    </div>
            	</div>
            </li>
            <li class="to-event" data-eventid="">
				<div>
					<div class="score-pic pull-left">
                       <img class="img-responsive" src="img/testimg.jpg">
                    </div>
                    <div class="score-school pull-left">
                        <p>大学生艺术节比赛活动大学生艺术节比赛活动大学生艺术节比赛活动</p>
                        <p>2015-09-28</p>
                    </div>
                    <div class="score-event-point pull-right">
                        <p class="score-event-signed">5.0<span>分</span></p>
                    </div>
				</div>
            </li>
            <li class="to-event" data-eventid="">
				<div>
					<div class="score-pic pull-left">
                       <img class="img-responsive" src="img/testimg.jpg">
                    </div>
                    <div class="score-school pull-left">
                        <p>大学生艺术节比赛活动大学生艺术节比赛活动大学生艺术节比赛活动</p>
                        <p>2015-09-28</p>
                    </div>
                    <div class="score-event-point pull-right">
                        <p class="score-event-signed">5.0<span>分</span></p>
                    </div>
				</div>
            </li>
            <li class="to-event" data-eventid="">
				<div>
					<div class="score-pic pull-left">
                       <img class="img-responsive" src="img/testimg.jpg">
                    </div>
                    <div class="score-school pull-left">
                        <p>大学生艺术节比赛活动大学生艺术节比赛活动大学生艺术节比赛活动</p>
                        <p>2015-09-28</p>
                    </div>
                    <div class="score-event-point pull-right">
                        <p class="score-event-signed">5.0<span>分</span></p>
                    </div>
				</div>
            </li>
        </ul>
    </div>
</div>
</body>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script>
	var page=1;
	var loadingStr = '<div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>';
	var noneStr = '<div class="nonestr">没有记录</div>';
	var loadingShow = false;
	var html = $(".score-list ul").html();
	$(function () {
		getdata();
	});
	
	function getdata(){
		if (!loadingShow) {
			$(".score-list ul").append(loadingStr);
			loadingShow = true;
			getAjaxNews();
		}
	
	}
		
	$(window).scroll(function(){
		var document = window.document;
		var top = document.body.scrollTop || document.documentElement.scrollTop
				|| 0;
		top += document.documentElement.clientHeight;
		var height = document.documentElement.scrollHeight;
		if (height - top < 1000) {
			if (!loadingShow) {
				$(".score-list ul").append(loadingStr);
				loadingShow = true;
				getAjaxNews();
			}
		}
	});
	
	function getAjaxNews() {
			$.ajax({
				url: "#",
				//type: 'get',
				data: {
					page: page
				},
				error: function () {
				},
				success: function (data) {
					//if (data!='0') {
						$(".spinner").hide();
					    $(".score-list ul").append(html);
					//	$(".square_comment_list").append(data);
						$(".spinner").remove();
						page++;
						loadingShow = false;
					//} else {
					//	$(".spinner").hide();
					//	$(".square_comment_list").append(noneStr);
					//	$(".spinner").remove();
					//}
				}
			});
	}

</script>
</html>
